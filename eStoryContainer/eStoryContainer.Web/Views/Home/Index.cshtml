@using eStoryContainer.Core.Utils
@{
    ViewData["Title"] = "Đọc truyện online,truyện đọc hay";
}
@model eStoryContainer.Core.ViewModels.HomePage
@*@await Html.PartialAsync("_HotStoryPartial")*@

<div class="container" id="intro-index">
    <div class="title-list">
        <h2><a href="danh-sach/truyen-hot/" title="Truyện hot">Truyện hot</a></h2><a href="danh-sach/truyen-hot/" title="Truyện hot">
            <span class="glyphicon glyphicon-fire"></span>
        </a><select id="hot-select" onchange="loadData2()"
                    class="form-control new-select" aria-label="Chọn thể loại">
            <option value="">Tất cả</option>
            @foreach (var item in Model.CategoryStories)
            {
                <option value="@item.category_story_name">@item.category_story_name</option>
            }
        </select>
    </div>

    <div class="index-intro" id="hot-stories">
        
    </div>

</div>

<div class="container" id="list-index">
    <div class="row text-center"></div>
    <div class="list list-truyen list-new col-xs-12 col-sm-12 col-md-8 col-truyen-main">
        <div class="title-list">
            <h2>
                <a href="javascript:void(0)" title="Truyện mới">
                    Truyện mới cập
                    nhật
                </a>
            </h2><a href="javascript:void(0)"
                    title="Truyện mới"><span class="glyphicon glyphicon-menu-right"></span></a>
            <select id="new-select" class="form-control new-select" onchange="loadDataStoriesUpdate();" aria-label="Chọn thể loại">
                <option value="">Tất cả</option>
                @foreach (var item in Model.CategoryStories)
                {
                    <option value="@item.category_story_name">@item.category_story_name</option>
                }
            </select>
        </div>
        <div id="stories-update-new">

        </div>
        
    </div>

    <div class="visible-md-block visible-lg-block col-md-4 text-center col-truyen-side">

        <div class="list list-truyen list-cat col-xs-12">
            <div class="title-list">
                <h4>Thể loại truyện</h4>
            </div>
            <div class="row">
                @foreach (var item in Model.CategoryStories)
                {
                    <div class="col-xs-6">
                        <a href="@item.category_story_name.SlugifyExt().ConvertSlugifyToGenre()"
                           title="Truyện @item.category_story_name">@item.category_story_name</a>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
<div class="container" id="truyen-slide">
    <div class="list list-thumbnail col-xs-12">
        <div class="title-list">
            <h2>
                <a href="danh-sach/truyen-full" title="Truyện full">
                    Truyện đã hoàn
                    thành
                </a>
            </h2><a href="danh-sach/truyen-full"
                    title="Truyện full"><span class="glyphicon glyphicon-menu-right"></span></a>
        </div>
        <div class="row">
            @foreach (var item in Model.StoriesFull)
            {
                <div class="col-xs-4 col-sm-3 col-md-2">
                    <a href="@item.slug"
                       title="@item.story_name">
                        <img src="@item.avatar_path" alt="@item.story_name">
                        <div class="caption">
                            <h3>@item.story_name</h3>
                            @*<small class="btn-xs label-primary">Full - 36 chương</small>*@
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</div>

<script>
    function loadData2() {
        var catName = $("#hot-select").val();
        $.ajax({
            type: "GET",
            url: "hot-stories",
            data: { catName: catName },
            contentType: "application/json; charset=utf-8",
            success: function (datas) {
                $("#hot-stories").html(datas);
            },
            error: function (req, status, error) {
                console.log(error);
            }
        });
    }

    function loadDataStoriesUpdate() {
        var catName = $("#new-select").val();
        $.ajax({
            type: "GET",
            url: "stories-update",
            data: { catName: catName },
            contentType: "application/json; charset=utf-8",
            success: function (datas) {
                $("#stories-update-new").html(datas);
            },
            error: function (req, status, error) {
                console.log(error);
            }
        });
    }

    $(document).ready(function () {
        loadData2();
        loadDataStoriesUpdate();
    });
</script>